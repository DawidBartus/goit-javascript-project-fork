{"mappings":"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","sources":["src/js/movie-details-modal.js","src/js/mainpage.js"],"sourcesContent":["const backdrop = document.getElementsByClassName('backdrop')[0];\nconst modal = document.getElementsByClassName('movie-details-modal')[0];\n\nconst showModal = () => {\n  backdrop.style.display = 'block';\n};\n\nconst closeModal = e => {\n  if ((backdrop.style.display !== 'none') & (e.target !== modal)) {\n    backdrop.style.display = 'none';\n  }\n};\n\nexport { showModal, closeModal };\n","'use strict';\nimport { closeModal, showModal } from './movie-details-modal';\nconst filmGalery = document.querySelector('.gallery__box');\nconst paginationList = document.querySelector('.pagination');\n\nconst APIKEY = 'cd99a2449e6daaffb205ea92bac682a0';\nlet page = 1;\nlet totalPages;\nlet link;\nlet filmsOnPage;\n\nconst { log } = console;\n\n// Fetch films from API\n\nexport const fetchFilms = link => {\n  return fetch(link)\n    .then(res => {\n      return res.json();\n    })\n    .catch(error => log(error));\n};\n\n// This function uses the film id to get the details of that film\n// Can be used to make a modal with film details\nexport const getFilmDetails = async id => {\n  link = `https://api.themoviedb.org/3/movie/${id}?api_key=${APIKEY}`;\n\n  return await fetchFilms(link).then(res => {\n    return res;\n  });\n};\n\n// Main function that loads tranding film on main page\nconst trendingFilms = () => {\n  link = `\n    https://api.themoviedb.org/3/trending/movie/week?api_key=${APIKEY}&page=${page}`;\n\n  return fetchFilms(link).then(res => {\n    totalPages = res.total_pages;\n    filmsOnPage = res.results;\n\n    createfilmGalery(filmsOnPage);\n    createButtons(totalPages, page);\n  });\n};\n\n// call the function\ntrendingFilms();\n\n// This function creates elements in .gallery_box\n// It can be used in other parts of the website,\n// but the html element definded by variable \"filmGalery\" -const filmGalery = document.querySelector('.gallery__box') must be there\n\nexport const createfilmGalery = elem => {\n  filmGalery.innerHTML = '';\n  elem.map(async film => {\n    let name = film.title;\n    let poster = film.poster_path;\n    let filmId = film.id;\n    let releseDate = film.release_date.slice(0, 4) || 'Sorry. No relase date yet.';\n    let other;\n    let newGenres;\n    // Because i can't get the genres names from first fetch\n    // i created second fetch from API that uses film id to get films details and then i extract genres names from it\n    let genres = await getFilmDetails(film.id).then(res => res.genres.map(elem => elem.name));\n\n    if (genres.length > 2) {\n      newGenres = genres.slice(0, 2).join(', ');\n      other = ', Other';\n    } else if (genres.length <= 2 && genres.length > 1) {\n      newGenres = genres;\n      other = '';\n      if (genres.length === 2) {\n        newGenres = genres.join(', ');\n        other = '';\n      }\n    } else {\n      newGenres = 'Sorry. No genre added yet.';\n      other = '';\n    }\n\n    const galeryItem = `<figure class=\"card\" data-id=\"${filmId}\">\n<img class=\"card__image\" src=\"https://image.tmdb.org/t/p/w500${poster}\" alt=\"${name} movie poster\" />\n<figcaption class=\"card__caption\">\n  <p class=\"card__title\">${name}</p>\n  <p class=\"card__description\">${newGenres + other} | ${releseDate}</p>\n</figcaption>\n</figure>`;\n\n    filmGalery.innerHTML = filmGalery.innerHTML + galeryItem;\n  });\n};\n\n// Pagination\n\nfunction createButtons(totalPages, page) {\n  let liTag = '';\n  let beforePage = page - 1;\n  let afterPage = page + 1;\n  let activeLi;\n  if (page > 1) {\n    liTag += `<button class=\"pagination__button--arrow-left\">\n    <i style=\"pointer-events: none\" class=\"fa-solid fa-arrow-left\"></i>\n  </button>`;\n  }\n  if (page > 2) {\n    liTag += `<button class=\"pagination__button\" type=\"button\" data-page=\"1\">1</button>`;\n    if (page > 3) {\n      liTag += `<span class=\"pagination__hidden-results\">&middot&middot&middot</span>`;\n    }\n  }\n\n  if (page === totalPages) {\n    beforePage = beforePage - 2;\n  } else if (page === totalPages - 1) {\n    beforePage = beforePage - 1;\n  }\n  if (page === 1) {\n    afterPage = afterPage + 2;\n  } else if (page === totalPages + 1) {\n    afterPage = afterPage + 1;\n  }\n\n  for (let pageLength = beforePage; pageLength <= afterPage; pageLength++) {\n    if (pageLength > totalPages) {\n      continue;\n    }\n    if (pageLength === 0) {\n      pageLength = pageLength + 1;\n    }\n    if (page == pageLength) {\n      activeLi = 'pagination__button--current';\n    } else {\n      activeLi = '';\n    }\n    liTag += `<button class=\"${activeLi} pagination__button\" type=\"button\" data-page=\"${pageLength}\">${pageLength}</button>`;\n  }\n  if (page < totalPages - 1) {\n    if (page < totalPages - 2) {\n      liTag += `<span class=\"pagination__hidden-results\">&middot&middot&middot</span>`;\n    }\n    liTag += `<button class=\"pagination__button\" type=\"button\" data-page=\"${totalPages}\">${totalPages}</button>`;\n  }\n\n  if (page < totalPages) {\n    liTag += `<button class=\"pagination__button--arrow-right\">\n    <i style=\"pointer-events: none\" class=\"fa-solid fa-arrow-right\"></i>\n  </button>`;\n  }\n\n  paginationList.innerHTML = liTag;\n}\n\nconst chceckBttn = e => {\n  const prev = document.querySelector('.pagination__button--arrow-left');\n  const next = document.querySelector('.pagination__button--arrow-right');\n\n  if (e.target === prev) {\n    page--;\n    trendingFilms();\n  }\n  if (e.target === next) {\n    page++;\n    trendingFilms();\n  }\n  if (e.target.type === 'button') {\n    page = Number(e.target.dataset.page);\n    trendingFilms();\n  }\n};\npaginationList.addEventListener('click', chceckBttn);\n\n// Operating the modal window\n\nconst filmCards = [...document.querySelectorAll('figure')];\nfilmCards.forEach(el => el.addEventListener('click', showModal));\n\nconst closeModalBtn = document.getElementsByClassName('movie-details-modal__close-btn')[0];\nwindow.addEventListener('click', closeModal);\ncloseModalBtn.addEventListener('click', closeModal);\n"],"names":["$2891a76fde9cc185$var$backdrop","document","getElementsByClassName","$2891a76fde9cc185$var$modal","$2891a76fde9cc185$export$d7e8d4d4450c819c","style","display","$2891a76fde9cc185$export$3f6fecd573f3fa48","e","target","$ea57b9b9d4f165e5$var$filmGalery","querySelector","$ea57b9b9d4f165e5$var$paginationList","$ea57b9b9d4f165e5$var$APIKEY","$ea57b9b9d4f165e5$var$totalPages","$ea57b9b9d4f165e5$var$link","$ea57b9b9d4f165e5$var$filmsOnPage","$ea57b9b9d4f165e5$var$page","log","$ea57b9b9d4f165e5$var$log","console","$ea57b9b9d4f165e5$export$651946d2de0aa03","link","fetch","then","res","json","catch","error","$ea57b9b9d4f165e5$var$trendingFilms","total_pages","results","$ea57b9b9d4f165e5$export$bf4f4e1e40ec1c99","totalPages","page","activeLi","liTag","beforePage","afterPage","pageLength","innerHTML","$ea57b9b9d4f165e5$var$createButtons","elem","map","async","film","other","newGenres","name","title","poster","poster_path","filmId","id","releseDate","release_date","slice","genres","$ea57b9b9d4f165e5$export$cb9b4ba94b6f0493","length","join","galeryItem","addEventListener","prev","next","type","Number","dataset","querySelectorAll","forEach","el","$ea57b9b9d4f165e5$var$closeModalBtn","window"],"version":3,"file":"index.0290ff11.js.map"}