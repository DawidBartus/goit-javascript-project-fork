{"mappings":"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","sources":["src/js/movie-details-modal.js","src/js/mainpage.js"],"sourcesContent":["const backdrop = document.getElementsByClassName('backdrop')[0];\nconst modal = document.getElementsByClassName('movie-details-modal')[0];\n\nconst showModal = () => {\n  backdrop.style.display = 'block';\n};\n\nconst closeModal = e => {\n  if ((backdrop.style.display !== 'none') & (e.target !== modal)) {\n    backdrop.style.display = 'none';\n  }\n};\n\nexport { showModal, closeModal };\n","'use strict';\nimport { closeModal, showModal } from './movie-details-modal';\nconst filmGalery = document.querySelector('.gallery__box');\nconst paginationList = document.querySelector('.pagination');\n\nexport const APIKEY = 'cd99a2449e6daaffb205ea92bac682a0';\nlet page = 1;\nlet totalPages;\nlet link;\nlet filmsOnPage;\n\nconst { log } = console;\n\n// Fetch films from API\n\nexport const fetchFilms = link => {\n  return fetch(link)\n    .then(res => {\n      return res.json();\n    })\n    .catch(error => log(error));\n};\n\n// This function uses the film id to get the details of that film\n// Can be used to make a modal with film details\nexport const getFilmDetails = async id => {\n  link = `https://api.themoviedb.org/3/movie/${id}?api_key=${APIKEY}`;\n\n  return await fetchFilms(link).then(res => {\n    return res;\n  });\n};\n\n// Main function that loads tranding film on main page\nconst trendingFilms = () => {\n  link = `\n    https://api.themoviedb.org/3/trending/movie/week?api_key=${APIKEY}&page=${page}`;\n\n  return fetchFilms(link).then(res => {\n    totalPages = res.total_pages;\n    filmsOnPage = res.results;\n    log(res.page);\n    createfilmGalery(filmsOnPage);\n    createButtons(totalPages, page);\n  });\n};\n\n// call the function\ntrendingFilms();\n\n// This function creates elements in .gallery_box\n// It can be used in other parts of the website,\n// but the html element definded by variable \"filmGalery\" -const filmGalery = document.querySelector('.gallery__box') must be there\n\nexport const createfilmGalery = elem => {\n  filmGalery.innerHTML = '';\n  elem.map(async film => {\n    let name = film.title;\n    let poster = film.poster_path;\n    let filmId = film.id;\n    let releseDate = film.release_date.slice(0, 4) || 'Sorry. No relase date yet.';\n    let other;\n    let newGenres;\n    // Because i can't get the genres names from first fetch\n    // i created second fetch from API that uses film id to get films details and then i extract genres names from it\n    let genres = await getFilmDetails(film.id).then(res => res.genres.map(elem => elem.name));\n\n    if (genres.length > 2) {\n      newGenres = genres.slice(0, 2).join(', ');\n      other = ', Other';\n    } else if (genres.length <= 2 && genres.length > 1) {\n      newGenres = genres;\n      other = '';\n      if (genres.length === 2) {\n        newGenres = genres.join(', ');\n        other = '';\n      }\n    } else {\n      newGenres = 'Sorry. No genre added yet.';\n      other = '';\n    }\n\n    const galeryItem = `<figure class=\"card\" data-id=\"${filmId}\">\n<img class=\"card__image\" src=\"https://image.tmdb.org/t/p/w500${poster}\" alt=\"${name} movie poster\" />\n<figcaption class=\"card__caption\">\n  <p class=\"card__title\">${name}</p>\n  <p class=\"card__description\">${newGenres + other} | ${releseDate}</p>\n</figcaption>\n</figure>`;\n\n    filmGalery.innerHTML = filmGalery.innerHTML + galeryItem;\n  });\n};\n\n// Pagination\n\nfunction createButtons(totalPages, page) {\n  let liTag = '';\n  let beforePage = page - 2;\n  let afterPage = page + 2;\n  let activeLi;\n\n  if (page > 1) {\n    liTag += `<button class=\"pagination__button--arrow-left\">\n  <i style=\"pointer-events: none\" class=\"fa-solid fa-arrow-left\"></i>\n</button>`;\n  }\n\n  // if there's more then 6 page\n  if (totalPages > 6) {\n    if (page > 3) {\n      liTag += `<button class=\"pagination__button\" type=\"button\" data-page=\"1\">1</button>`;\n      if (page > 4) {\n        liTag += `<span class=\"pagination__hidden-results\">&middot&middot&middot</span>`;\n      }\n    }\n\n    if (page === totalPages) {\n      beforePage = beforePage;\n    }\n    if (page === 1) {\n      afterPage = afterPage;\n    } else if (page === totalPages + 1) {\n      afterPage = afterPage + 1;\n    }\n\n    for (let pageLength = beforePage; pageLength <= afterPage; pageLength++) {\n      if (pageLength > totalPages) {\n        continue;\n      }\n      if (pageLength < 0) {\n        pageLength = pageLength + 2;\n      }\n      if (pageLength === 0) {\n        pageLength = pageLength + 1;\n      }\n\n      if (page == pageLength) {\n        activeLi = 'pagination__button--current';\n      } else {\n        activeLi = '';\n      }\n      liTag += `<button class=\"${activeLi} pagination__button\" type=\"button\" data-page=\"${pageLength}\">${pageLength}</button>`;\n    }\n    if (page < totalPages - 2) {\n      if (page < totalPages - 3) {\n        liTag += `<span class=\"pagination__hidden-results\">&middot&middot&middot</span>`;\n      }\n      liTag += `<button class=\"pagination__button\" type=\"button\" data-page=\"${totalPages}\">${totalPages}</button>`;\n    }\n  }\n  // if there's less then 6 page\n  else {\n    for (let pageLength = 1; pageLength <= totalPages; pageLength++) {\n      if (page == pageLength) {\n        activeLi = 'pagination__button--current';\n      } else {\n        activeLi = '';\n      }\n      liTag += `<button class=\"${activeLi} pagination__button\" type=\"button\" data-page=\"${pageLength}\">${pageLength}</button>`;\n    }\n  }\n\n  if (page < totalPages) {\n    liTag += `<button class=\"pagination__button--arrow-right\">\n  <i style=\"pointer-events: none\" class=\"fa-solid fa-arrow-right\"></i>\n</button>`;\n  }\n\n  paginationList.innerHTML = liTag;\n}\n// let maxPage = 8;\n// createButtons(maxPage, page);\nconst mainDocumentBuildingFunction = () => trendingFilms();\nconst chceckBttn = e => {\n  const prev = document.querySelector('.pagination__button--arrow-left');\n  const next = document.querySelector('.pagination__button--arrow-right');\n\n  if (e.target === prev) {\n    page--;\n    mainDocumentBuildingFunction();\n  }\n  if (e.target === next) {\n    page++;\n    mainDocumentBuildingFunction();\n  }\n  if (e.target.type === 'button') {\n    page = Number(e.target.dataset.page);\n    mainDocumentBuildingFunction();\n  }\n};\npaginationList.addEventListener('click', chceckBttn);\n\n// Operating the modal window\n\nconst filmCards = [...document.querySelectorAll('figure')];\nfilmCards.forEach(el => el.addEventListener('click', showModal));\n\nconst closeModalBtn = document.getElementsByClassName('movie-details-modal__close-btn')[0];\nwindow.addEventListener('click', closeModal);\ncloseModalBtn.addEventListener('click', closeModal);\n"],"names":["$93c1cfd4bb728ce3$var$backdrop","document","getElementsByClassName","$93c1cfd4bb728ce3$var$modal","$93c1cfd4bb728ce3$export$d7e8d4d4450c819c","style","display","$93c1cfd4bb728ce3$export$3f6fecd573f3fa48","e","target","$a9dd6ed579cc30ce$var$filmGalery","querySelector","$a9dd6ed579cc30ce$var$paginationList","$a9dd6ed579cc30ce$export$8aa241ee05ce92b7","$a9dd6ed579cc30ce$var$totalPages","$a9dd6ed579cc30ce$var$link","$a9dd6ed579cc30ce$var$filmsOnPage","$a9dd6ed579cc30ce$var$page","log","$a9dd6ed579cc30ce$var$log","console","$a9dd6ed579cc30ce$export$651946d2de0aa03","link","fetch","then","res","json","catch","error","$a9dd6ed579cc30ce$var$trendingFilms","total_pages","results","page","$a9dd6ed579cc30ce$export$bf4f4e1e40ec1c99","totalPages","activeLi","liTag","beforePage","afterPage","pageLength","innerHTML","$a9dd6ed579cc30ce$var$createButtons","elem","map","async","film","other","newGenres","name","title","poster","poster_path","filmId","id","releseDate","release_date","slice","genres","$a9dd6ed579cc30ce$export$cb9b4ba94b6f0493","length","join","galeryItem","$a9dd6ed579cc30ce$var$mainDocumentBuildingFunction","addEventListener","prev","next","type","Number","dataset","querySelectorAll","forEach","el","$a9dd6ed579cc30ce$var$closeModalBtn","window"],"version":3,"file":"index.5eafdf21.js.map"}